<button
  mat-raised-button
  class="back-link-wrapper cursor-pointer"
  routerLink="/users"
>
  <mat-icon aria-hidden="false" aria-label="Back to users">
    keyboard_backspace
  </mat-icon>
  <span>Back to all users</span>
</button>
<div class="flex-center-container">
  <div class="loader-wrapper" *ngIf="isLoading">
    <mat-spinner></mat-spinner>
  </div>
  <div *ngIf="!isLoading">
    <div class="box">
      <img
        [src]="user.avatar_url"
        class="rounded-image"
        width="200"
        height="200"
      />
      <h2 class="mat-h1">{{ user.login }}</h2>
    </div>
    <mat-tab-group>
      <!-- Repos -->
      <mat-tab [label]="'Public Repos: ' + user.public_repos">
        <div class="loader-wrapper" *ngIf="isLoadingAdditional">
          <mat-spinner></mat-spinner>
        </div>
        <table
          mat-table
          [dataSource]="repos"
          *ngIf="!isLoadingAdditional && repos.length > 0"
        >
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>Description</th>
            <td mat-cell *matCellDef="let element">
              {{ element.description }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedReposColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedReposColumns"></tr>
        </table>
      </mat-tab>
      <!-- Followers -->
      <mat-tab [label]="'Followers: ' + user.followers">
        <div class="loader-wrapper" *ngIf="isLoadingAdditional">
          <mat-spinner></mat-spinner>
        </div>
        <table
          mat-table
          [dataSource]="followers"
          *ngIf="!isLoadingAdditional && followers.length > 0"
        >
          <ng-container matColumnDef="avatar_url">
            <th mat-header-cell *matHeaderCellDef>Avatar</th>
            <td mat-cell *matCellDef="let element">
              <img
                [src]="element.avatar_url"
                class="rounded-image"
                width="100"
                height="100"
              />
            </td>
          </ng-container>

          <ng-container matColumnDef="login">
            <th mat-header-cell *matHeaderCellDef>Login</th>
            <td mat-cell *matCellDef="let element">{{ element.login }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedFollowersColumns"></tr>
          <tr
            class="cursor-pointer"
            mat-row
            *matRowDef="let row; columns: displayedFollowersColumns"
            (click)="onFollowerClick(row)"
          ></tr>
        </table>
      </mat-tab>
      <!-- Issues -->
      <mat-tab *ngIf="loggedUser" label="Issues"> Content 3 </mat-tab>
    </mat-tab-group>
  </div>
</div>
